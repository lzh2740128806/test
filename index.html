<!DOCTYPE html>
<html lang="en">
<head>
	<meta name="viewport" content="width=device-width">
	<meta charset="UTF-8">
	<title>测试</title>
	<style>
		html, body{
			margin: 0;
			width: 100%;
			height: 100%;
			font-size: 14px;
			text-align: center;
		}
	</style>
</head>
<body>
	<img src="8.jpg" alt="" style="width: 100px;">
	<script>
		var img = document.querySelector('img');

		function gesture(){
			var touches_len;
			var x1 = 0;
			var y1 = 0;
			var x2 = 0;
			var y2 = 0;
			var translate_x = 0;
			var translate_y = 0;
			var scale = 1;
			var rotate = 0;
			function cb(){
				img.style.transform = `translate(${translate_x}px ${translate_y}px) rotate(${rotate}deg) scale(${scale})`;
			}
			function start(e){
				touches_len = e.targetTouches.length;
				x1 = e.targetTouches[0].clientX;
				y1 = e.targetTouches[0].clientY;
				if(touches_len>1){
					x2 = e.targetTouches[1].clientX;
					y2 = e.targetTouches[1].clientY;
				}
			}
			function move(e){
				var mx1, my1, mx2, my2;
				mx1 = e.targetTouches[0].clientX;
				my1 = e.targetTouches[0].clientY;
				if(touches_len==1){
					translate_x = mx1 - x1;
					translate_y = my1 - y1;
				}
				if(touches_len==2){
					mx2 = e.targetTouches[1].clientX;
					my2 = e.targetTouches[1].clientY;
					scale = Math.sqrt(Math.pow(mx2 - mx1, 2) + Math.pow(my2 - my1, 2)) / Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));
					// rotate = 
				}
				cb();
				
			}
			function end(){
				document.removeEventListener('touchstart', start);
				document.removeEventListener('touchmove', move);
				document.removeEventListener('touchend', end);
			}
			document.addEventListener('touchstart', start);
			document.addEventListener('touchmove', move);
			document.addEventListener('touchend', end);
		}
		
	</script>
</body>
</html>